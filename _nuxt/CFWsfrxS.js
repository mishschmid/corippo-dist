import{al as x,am as U,an as b,ao as y,ap as D,aq as P,ar as I,ag as H,as as C,X as v}from"./B__WnebC.js";function oe(t){var e;(e=performance==null?void 0:performance.mark)==null||e.call(performance,"mark_feature_usage",{detail:{feature:t}})}async function F(t,e){return await L(e).catch(i=>(console.error("Failed to get image meta for "+e,i+""),{width:0,height:0,ratio:0}))}async function L(t){if(typeof Image>"u")throw new TypeError("Image not supported");return new Promise((e,r)=>{const i=new Image;i.onload=()=>{const n={width:i.width,height:i.height,ratio:i.width/i.height};e(n)},i.onerror=n=>r(n),i.src=t})}function j(t){return e=>e!==void 0?t[e]||e:t.missingValue}function V(t={}){const e=t.formatter,r=t.keyMap&&typeof t.keyMap!="function"?j(t.keyMap):t.keyMap,i={};for(const n in t.valueMap){const o=n,a=t.valueMap[o];i[o]=typeof a=="object"?j(a):a}return n=>{const o=[];for(const a in n){const s=a;if(typeof n[s]>"u")continue;const f=typeof i[s]=="function"?i[s](n[s]):n[s];o.push([r?r(s):s,f])}return e?o.map(a=>e(...a)).join(t.joinWith??"&"):new URLSearchParams(o).toString()}}function J(t=""){if(t===void 0||!t.length)return[];const e=new Set;for(const r of t.split(" ")){const i=Number.parseInt(r.replace("x",""));i&&e.add(i)}return Array.from(e)}function Q(t){if(t.length===0)throw new Error("`densities` must not be empty, configure to `1` to render regular size only (DPR 1.0)")}function p(t=""){if(typeof t=="number")return t;if(typeof t=="string"&&t.replace("px","").match(/^\d+$/g))return Number.parseInt(t,10)}function T(t){const e={};if(typeof t=="string")for(const r of t.split(/[\s,]+/).filter(i=>i)){const i=r.split(":");i.length!==2?e["1px"]=i[0].trim():e[i[0].trim()]=i[1].trim()}else Object.assign(e,t);return e}function B(t){const e={options:t},r=(n,o={})=>q(e,n,o),i=(n,o,a)=>r(n,x({modifiers:o},a)).url;for(const n in t.presets)i[n]=(o,a,s)=>i(o,a,{...t.presets[n],...s});return i.options=t,i.getImage=r,i.getMeta=(n,o)=>K(e,n,o),i.getSizes=(n,o)=>Y(e,n,o),e.$img=i,i}async function K(t,e,r){const i=q(t,e,{...r});return typeof i.getMeta=="function"?await i.getMeta():await F(t,i.url)}function q(t,e,r){var w,m;if(e&&typeof e!="string")throw new TypeError(`input must be a string (received ${typeof e}: ${JSON.stringify(e)})`);if(!e||e.startsWith("data:"))return{url:e};const{setup:i,defaults:n}=X(t,r.provider||t.options.provider),o=i(),a=N(t,r.preset);if(e=b(e)?e:U(e),!o.supportsAlias){for(const c in t.options.alias)if(e.startsWith(c)){const g=t.options.alias[c];g&&(e=y(g,e.slice(c.length)))}}if(o.validateDomains&&b(e)){const c=D(e).host;if(!t.options.domains.find(g=>g===c))return{url:e}}const s=x(r,a,n),f={...s,modifiers:{...s.modifiers,width:(w=s.modifiers)!=null&&w.width?p(s.modifiers.width):void 0,height:(m=s.modifiers)!=null&&m.height?p(s.modifiers.height):void 0}},u=o.getImage(e,f,t);return u.format||(u.format=f.modifiers.format||""),u}function X(t,e){const r=t.options.providers[e];if(!r)throw new Error("Unknown provider: "+e);return r}function N(t,e){if(!e)return{};if(!t.options.presets[e])throw new Error("Unknown preset: "+e);return t.options.presets[e]}function Y(t,e,r){var _,k,$,S,W;const i=N(t,r.preset),n=x(r,i),o=p((_=n.modifiers)==null?void 0:_.width),a=p((k=n.modifiers)==null?void 0:k.height),s=n.sizes?T(n.sizes):{},f=($=n.densities)==null?void 0:$.trim(),u=f?J(f):t.options.densities;Q(u);const w=o&&a?a/o:0,m=[],c=[];if(Object.keys(s).length>=1){for(const d in s){const h=z(d,String(s[d]),a,w,t);if(h!==void 0){m.push({size:h.size,screenMaxWidth:h.screenMaxWidth,media:`(max-width: ${h.screenMaxWidth}px)`});for(const l of u)c.push({width:h._cWidth*l,src:A(t,e,r,h,l)})}}Z(m)}else for(const d of u){const h=Object.keys(s)[0];let l=h?z(h,String(s[h]),a,w,t):void 0;l===void 0&&(l={size:"",screenMaxWidth:0,_cWidth:(S=r.modifiers)==null?void 0:S.width,_cHeight:(W=r.modifiers)==null?void 0:W.height}),c.push({width:d,src:A(t,e,r,l,d)})}ee(c);const g=c[c.length-1],M=m.length?m.map(d=>`${d.media?d.media+" ":""}${d.size}`).join(", "):void 0,O=M?"w":"x",R=c.map(d=>`${d.src} ${d.width}${O}`).join(", ");return{sizes:M,srcset:R,src:g==null?void 0:g.src}}function z(t,e,r,i,n){const o=n.options.screens&&n.options.screens[t]||Number.parseInt(t),a=e.endsWith("vw");if(!a&&/^\d+$/.test(e)&&(e=e+"px"),!a&&!e.endsWith("px"))return;let s=Number.parseInt(e);if(!o||!s)return;a&&(s=Math.round(s/100*o));const f=i?Math.round(s*i):r;return{size:e,screenMaxWidth:o,_cWidth:s,_cHeight:f}}function A(t,e,r,i,n){return t.$img(e,{...r.modifiers,width:i._cWidth?i._cWidth*n:void 0,height:i._cHeight?i._cHeight*n:void 0},r)}function Z(t){var r;t.sort((i,n)=>i.screenMaxWidth-n.screenMaxWidth);let e=null;for(let i=t.length-1;i>=0;i--){const n=t[i];n.media===e&&t.splice(i,1),e=n.media}for(let i=0;i<t.length;i++)t[i].media=((r=t[i+1])==null?void 0:r.media)||""}function ee(t){t.sort((r,i)=>r.width-i.width);let e=null;for(let r=t.length-1;r>=0;r--){const i=t[r];i.width===e&&t.splice(r,1),e=i.width}}function E(t){let e;return()=>e||(e=typeof t=="function"?t():t,e)}const G=V({keyMap:{format:"f",width:"w",height:"h",resize:"s",quality:"q",background:"b",position:"pos"},formatter:(t,e)=>I(t)+"_"+I(e.toString())}),te=E({validateDomains:!0,supportsAlias:!0,getImage:(t,{modifiers:e,baseURL:r},i)=>{e.width&&e.height&&(e.resize=`${e.width}x${e.height}`,delete e.width,delete e.height);const n=G(e)||"_";return r||(r=y(i.options.nuxt.baseURL,"/_ipx")),{url:y(r,n,P(t))}}}),ie=E({validateDomains:!0,supportsAlias:!0,getImage(t,{modifiers:e,baseURL:r},i){e.width&&e.height&&(e.resize=`${e.width}x${e.height}`,delete e.width,delete e.height);const n=G(e)||"_";return r||(r=y(i.options.nuxt.baseURL,"/_ipx")),{url:y(r,n,P(t).replace(/\/{2,}/g,"/"))}}}),re={screens:{sm:640,md:768,lg:1024,xl:1280,"2xl":1536,xs:320,xxl:1536},presets:{default:{modifiers:{quality:75}}},provider:"ipxStatic",domains:["corippo.com"],alias:{"/corippo":"https://corippo.com"},densities:[1,2],format:["webp","png","jpg","webp"],quality:80,provider:"ipxStatic",providers:{ipx:{setup:te,defaults:{maxAge:604800}},ipxStatic:{setup:ie,defaults:{maxAge:604800}}}},ne=t=>{var i;const e=C(),r=H();return r.$img||r._img||(r._img=B({...re,event:(i=r.ssrContext)==null?void 0:i.event,nuxt:{baseURL:e.app.baseURL},runtimeConfig:e}))},ae=t=>{const e=ne(),r=v(()=>({provider:t.provider,preset:t.preset})),i=v(()=>({width:p(t.width),height:p(t.height),crossorigin:t.crossorigin===!0?"anonymous":t.crossorigin||void 0,nonce:t.nonce})),n=v(()=>({...t.modifiers,width:t.width,height:t.height,format:t.format,quality:t.quality||e.options.quality,background:t.background,fit:t.fit}));return{providerOptions:r,normalizedAttrs:i,imageModifiers:n}};export{ae as a,oe as m,ne as u};
