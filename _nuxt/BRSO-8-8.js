import{I as D}from"./nlCW5duB.js";import{D as F,g as v,v as H,o as n,e as L,n as a,w as S,a as h,b as M,t as m,c as d,F as y,r as $,_ as C,k as A,h as E,z as f}from"./D-LoX80u.js";import{u as N}from"./oAIPbWhV.js";import{u as R}from"./DHY3DpCu.js";import{a as P}from"./Dix8s6Jv.js";const T=()=>{var c;const e=((c=F().app)==null?void 0:c.baseURL)||"/corippo-dist";return{getImageUrl:i=>{if(!i)return"";if(i.startsWith("http"))return i;if(i.includes("/uploads/")){const t=i.split("/uploads/")[1];return`${e}/uploads/${t}`}return i}}},V=v({__name:"HighlightCard",props:{highlight:{}},setup(_){return T(),(e,r)=>{const c=D,i=L;return n(),H(i,{to:`/highlights/${e.highlight.slug}`,class:a(e.$style.card)},{default:S(()=>{var t,l;return[h("div",{class:a(e.$style.image)},[M(c,{src:((t=e.highlight.headerImage)==null?void 0:t.url)||"/images/placeholder.jpg",alt:((l=e.highlight.headerImage)==null?void 0:l.alternativeText)||e.highlight.title,lazy:!1},null,8,["src","alt"])],2),h("div",{class:a(e.$style.content)},[h("h3",{class:a(e.$style.title)},m(e.highlight.title),3),h("p",{class:a(e.$style.description)},m(e.highlight.description),3),h("div",{class:a(e.$style.categories)},[(n(!0),d(y,null,$(e.highlight.categories,s=>(n(),d("span",{key:s.slug,class:a(e.$style.category)},m(s.name),3))),128))],2)],2)]}),_:1},8,["to","class"])}}}),j="_card_1pb4t_1",W="_image_1pb4t_15",q="_content_1pb4t_26",G="_title_1pb4t_30",J="_description_1pb4t_36",K="_categories_1pb4t_42",O="_category_1pb4t_48",Q={card:j,image:W,content:q,title:G,description:J,categories:K,category:O},X={$style:Q},Y=C(V,[["__cssModules",X]]),Z=["onClick"],x=v({__name:"CategoryFilter",props:{availableCategories:{},selectedCategories:{}},emits:["update:selectedCategories"],setup(_,{emit:e}){const r=_,c=e,i=t=>{const l=r.selectedCategories.includes(t)?r.selectedCategories.filter(s=>s!==t):[...r.selectedCategories,t];c("update:selectedCategories",l)};return(t,l)=>(n(),d("div",{class:a(t.$style.filter)},[h("div",{class:a(t.$style.categories)},[(n(!0),d(y,null,$(t.availableCategories,s=>(n(),d("button",{key:s,class:a([t.$style.category,{[t.$style.active]:t.selectedCategories.includes(s)}]),onClick:b=>i(s)},m(s),11,Z))),128))],2)],2))}}),ee="_filter_1exu3_1",te="_categories_1exu3_5",se="_category_1exu3_11",ae="_active_1exu3_23",ie={filter:ee,categories:te,category:se,active:ae},le={$style:ie},oe=C(x,[["__cssModules",le]]),ne=v({__name:"index",async setup(_){var k,B,I,w;let e,r;const{getPageBySlug:c,getHighlightBlocks:i}=N(),t=A([]),{data:l}=([e,r]=E(async()=>P("highlights",async()=>await c("highlights"))),e=await e,r(),e);R({title:(B=(k=l.value)==null?void 0:k.seo)==null?void 0:B.metaTitle,meta:[{name:"description",content:(w=(I=l.value)==null?void 0:I.seo)==null?void 0:w.metaDescription}]});const s=f(()=>l.value?i(l.value):[]),b=f(()=>{var u;const g=new Set;return(u=s.value)==null||u.forEach(o=>{var z;o&&((z=o.categories)==null||z.forEach(p=>{p!=null&&p.name&&g.add(p.name)}))}),Array.from(g)}),U=f(()=>s.value?t.value.length===0?s.value.filter(Boolean):s.value.filter(Boolean).filter(g=>{var u;return(u=g.categories)==null?void 0:u.some(o=>t.value.includes(o.name))}):[]);return(g,u)=>(n(),d("div",{class:a(g.$style.highlights)},[h("h1",{class:a(g.$style.title)},"Highlights",2),M(oe,{availableCategories:b.value,selectedCategories:t.value,"onUpdate:selectedCategories":u[0]||(u[0]=o=>t.value=o)},null,8,["availableCategories","selectedCategories"]),h("div",{class:a(g.$style.grid)},[(n(!0),d(y,null,$(U.value,o=>(n(),H(Y,{key:o.slug,highlight:o},null,8,["highlight"]))),128))],2)],2))}}),re="_highlights_17ubz_1",ce="_title_17ubz_12",ge="_grid_17ubz_18",ue={highlights:re,title:ce,grid:ge},he={$style:ue},ve=C(ne,[["__cssModules",he]]);export{ve as default};
