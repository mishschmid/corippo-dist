import{al as M,am as U,an as $,ao as v,ap as O,aq as I,ar as D,ag as E,as as H,X as y}from"./B-GZQTAR.js";function oe(e){var t;(t=performance==null?void 0:performance.mark)==null||t.call(performance,"mark_feature_usage",{detail:{feature:e}})}async function L(e,t){return await C(t).catch(i=>(console.error("Failed to get image meta for "+t,i+""),{width:0,height:0,ratio:0}))}async function C(e){if(typeof Image>"u")throw new TypeError("Image not supported");return new Promise((t,r)=>{const i=new Image;i.onload=()=>{const n={width:i.width,height:i.height,ratio:i.width/i.height};t(n)},i.onerror=n=>r(n),i.src=e})}function z(e){return t=>t!==void 0?e[t]||t:e.missingValue}function F(e={}){const t=e.formatter,r=e.keyMap&&typeof e.keyMap!="function"?z(e.keyMap):e.keyMap,i={};for(const n in e.valueMap){const s=n,a=e.valueMap[s];i[s]=typeof a=="object"?z(a):a}return n=>{const s=[];for(const a in n){const o=a;if(typeof n[o]>"u")continue;const f=typeof i[o]=="function"?i[o](n[o]):n[o];s.push([r?r(o):o,f])}return t?s.map(a=>t(...a)).join(e.joinWith??"&"):new URLSearchParams(s).toString()}}function G(e=""){if(e===void 0||!e.length)return[];const t=new Set;for(const r of e.split(" ")){const i=Number.parseInt(r.replace("x",""));i&&t.add(i)}return Array.from(t)}function V(e){if(e.length===0)throw new Error("`densities` must not be empty, configure to `1` to render regular size only (DPR 1.0)")}function p(e=""){if(typeof e=="number")return e;if(typeof e=="string"&&e.replace("px","").match(/^\d+$/g))return Number.parseInt(e,10)}function Q(e){const t={};if(typeof e=="string")for(const r of e.split(/[\s,]+/).filter(i=>i)){const i=r.split(":");i.length!==2?t["1px"]=i[0].trim():t[i[0].trim()]=i[1].trim()}else Object.assign(t,e);return t}function T(e){const t={options:e},r=(n,s={})=>N(t,n,s),i=(n,s,a)=>r(n,M({modifiers:s},a)).url;for(const n in e.presets)i[n]=(s,a,o)=>i(s,a,{...e.presets[n],...o});return i.options=e,i.getImage=r,i.getMeta=(n,s)=>B(t,n,s),i.getSizes=(n,s)=>K(t,n,s),t.$img=i,i}async function B(e,t,r){const i=N(e,t,{...r});return typeof i.getMeta=="function"?await i.getMeta():await L(e,i.url)}function N(e,t,r){var w,m;if(t&&typeof t!="string")throw new TypeError(`input must be a string (received ${typeof t}: ${JSON.stringify(t)})`);if(!t||t.startsWith("data:"))return{url:t};const{setup:i,defaults:n}=J(e,r.provider||e.options.provider),s=i(),a=A(e,r.preset);if(t=$(t)?t:U(t),!s.supportsAlias){for(const c in e.options.alias)if(t.startsWith(c)){const g=e.options.alias[c];g&&(t=v(g,t.slice(c.length)))}}if(s.validateDomains&&$(t)){const c=O(t).host;if(!e.options.domains.find(g=>g===c))return{url:t}}const o=M(r,a,n),f={...o,modifiers:{...o.modifiers,width:(w=o.modifiers)!=null&&w.width?p(o.modifiers.width):void 0,height:(m=o.modifiers)!=null&&m.height?p(o.modifiers.height):void 0}},u=s.getImage(t,f,e);return u.format||(u.format=f.modifiers.format||""),u}function J(e,t){const r=e.options.providers[t];if(!r)throw new Error("Unknown provider: "+t);return r}function A(e,t){if(!t)return{};if(!e.options.presets[t])throw new Error("Unknown preset: "+t);return e.options.presets[t]}function K(e,t,r){var x,S,k,W,b;const i=A(e,r.preset),n=M(r,i),s=p((x=n.modifiers)==null?void 0:x.width),a=p((S=n.modifiers)==null?void 0:S.height),o=n.sizes?Q(n.sizes):{},f=(k=n.densities)==null?void 0:k.trim(),u=f?G(f):e.options.densities;V(u);const w=s&&a?a/s:0,m=[],c=[];if(Object.keys(o).length>=1){for(const d in o){const h=P(d,String(o[d]),a,w,e);if(h!==void 0){m.push({size:h.size,screenMaxWidth:h.screenMaxWidth,media:`(max-width: ${h.screenMaxWidth}px)`});for(const l of u)c.push({width:h._cWidth*l,src:j(e,t,r,h,l)})}}X(m)}else for(const d of u){const h=Object.keys(o)[0];let l=h?P(h,String(o[h]),a,w,e):void 0;l===void 0&&(l={size:"",screenMaxWidth:0,_cWidth:(W=r.modifiers)==null?void 0:W.width,_cHeight:(b=r.modifiers)==null?void 0:b.height}),c.push({width:d,src:j(e,t,r,l,d)})}Y(c);const g=c[c.length-1],_=m.length?m.map(d=>`${d.media?d.media+" ":""}${d.size}`).join(", "):void 0,q=_?"w":"x",R=c.map(d=>`${d.src} ${d.width}${q}`).join(", ");return{sizes:_,srcset:R,src:g==null?void 0:g.src}}function P(e,t,r,i,n){const s=n.options.screens&&n.options.screens[e]||Number.parseInt(e),a=t.endsWith("vw");if(!a&&/^\d+$/.test(t)&&(t=t+"px"),!a&&!t.endsWith("px"))return;let o=Number.parseInt(t);if(!s||!o)return;a&&(o=Math.round(o/100*s));const f=i?Math.round(o*i):r;return{size:t,screenMaxWidth:s,_cWidth:o,_cHeight:f}}function j(e,t,r,i,n){return e.$img(t,{...r.modifiers,width:i._cWidth?i._cWidth*n:void 0,height:i._cHeight?i._cHeight*n:void 0},r)}function X(e){var r;e.sort((i,n)=>i.screenMaxWidth-n.screenMaxWidth);let t=null;for(let i=e.length-1;i>=0;i--){const n=e[i];n.media===t&&e.splice(i,1),t=n.media}for(let i=0;i<e.length;i++)e[i].media=((r=e[i+1])==null?void 0:r.media)||""}function Y(e){e.sort((r,i)=>r.width-i.width);let t=null;for(let r=e.length-1;r>=0;r--){const i=e[r];i.width===t&&e.splice(r,1),t=i.width}}function Z(e){let t;return()=>t||(t=typeof e=="function"?e():e,t)}const ee=F({keyMap:{format:"f",width:"w",height:"h",resize:"s",quality:"q",background:"b",position:"pos"},formatter:(e,t)=>I(e)+"_"+I(t.toString())}),te=Z({validateDomains:!0,supportsAlias:!0,getImage(e,{modifiers:t,baseURL:r},i){t.width&&t.height&&(t.resize=`${t.width}x${t.height}`,delete t.width,delete t.height);const n=ee(t)||"_";return r||(r=v(i.options.nuxt.baseURL,"/_ipx")),{url:v(r,n,D(e).replace(/\/{2,}/g,"/"))}}}),ie={screens:{sm:640,md:768,lg:1024,xl:1280,"2xl":1536,xs:320,xxl:1536},presets:{},provider:"ipxStatic",domains:["corippo.com"],alias:{"/corippo":"https://corippo.com"},densities:[1,2],format:["webp","png","jpg","webp"],quality:80,provider:"ipxStatic",providers:{ipxStatic:{setup:te,defaults:{}}}},re=e=>{var i;const t=H(),r=E();return r.$img||r._img||(r._img=T({...ie,event:(i=r.ssrContext)==null?void 0:i.event,nuxt:{baseURL:t.app.baseURL},runtimeConfig:t}))},se=e=>{const t=re(),r=y(()=>({provider:e.provider,preset:e.preset})),i=y(()=>({width:p(e.width),height:p(e.height),crossorigin:e.crossorigin===!0?"anonymous":e.crossorigin||void 0,nonce:e.nonce})),n=y(()=>({...e.modifiers,width:e.width,height:e.height,format:e.format,quality:e.quality||t.options.quality,background:e.background,fit:e.fit}));return{providerOptions:r,normalizedAttrs:i,imageModifiers:n}};export{se as a,oe as m,re as u};
