import{z as B,g as C,k as R,o as c,e as H,n as i,w as I,a as r,i as M,t as p,c as h,F as $,r as y,_ as v,h as z,s as f,l as S,b as F,u as E}from"./CQyVKbe_.js";import{u as N}from"./DMPcU3vO.js";import{u as A}from"./CK-F4kTR.js";const D=()=>{var d;const a=((d=B().app)==null?void 0:d.baseURL)||"/";return console.log("[Image Composable] baseURL from runtimeConfig:",a),{getImageUrl:e=>{if(!e)return"";const s=e.includes("/uploads")?e.split("/uploads/")[1]:e.replace(/^\/+/,"");return`${a}uploads/${s}`}}},P=["src","alt"],V=C({__name:"HighlightCard",props:{highlight:{}},setup(_){const{getImageUrl:a}=D();return(t,d)=>{const e=H;return c(),R(e,{to:`/highlights/${t.highlight.slug}`,class:i(t.$style.card)},{default:I(()=>{var s;return[r("div",{class:i(t.$style.image)},[r("img",{src:M(a)((s=t.highlight.headerImage)==null?void 0:s.url),alt:t.highlight.title},null,8,P)],2),r("div",{class:i(t.$style.content)},[r("h3",{class:i(t.$style.title)},p(t.highlight.title),3),r("p",{class:i(t.$style.description)},p(t.highlight.description),3),r("div",{class:i(t.$style.tags)},[(c(!0),h($,null,y(t.highlight.categories,l=>(c(),h("span",{key:l.slug,class:i(t.$style.category)},p(l.name),3))),128))],2)],2)]}),_:1},8,["to","class"])}}}),T="_card_1pb4t_1",j="_image_1pb4t_15",q="_content_1pb4t_26",G="_title_1pb4t_30",J="_description_1pb4t_36",K="_categories_1pb4t_42",O="_category_1pb4t_48",Q={card:T,image:j,content:q,title:G,description:J,categories:K,category:O},W={$style:Q},X=v(V,[["__cssModules",W]]),Y=["onClick"],Z=C({__name:"CategoryFilter",props:{availableCategories:{},selectedCategories:{}},emits:["update:selectedCategories"],setup(_,{emit:a}){const t=_,d=a,e=s=>{const l=t.selectedCategories.includes(s)?t.selectedCategories.filter(g=>g!==s):[...t.selectedCategories,s];console.log("newCategories:",l),d("update:selectedCategories",l)};return(s,l)=>(c(),h("div",{class:i(s.$style.filter)},[r("div",{class:i(s.$style.categories)},[(c(!0),h($,null,y(s.availableCategories,g=>(c(),h("button",{key:g,class:i([s.$style.category,{[s.$style.active]:s.selectedCategories.includes(g)}]),onClick:b=>e(g)},p(g),11,Y))),128))],2)],2))}}),x="_filter_1exu3_1",ee="_categories_1exu3_5",te="_category_1exu3_11",se="_active_1exu3_23",ie={filter:x,categories:ee,category:te,active:se},ae={$style:ie},le=v(Z,[["__cssModules",ae]]),oe=C({__name:"index",async setup(_){var k,U,w;let a,t;E();const{getPageBySlug:d}=N(),e=([a,t]=z(()=>d("highlights")),a=await a,t(),a);A({title:(k=e==null?void 0:e.seo)==null?void 0:k.metaTitle,meta:[{name:"description",content:(U=e==null?void 0:e.seo)==null?void 0:U.metaDescription}],link:(w=e==null?void 0:e.seo)!=null&&w.canonicalURL?[{rel:"canonical",href:e.seo.canonicalURL}]:[]});const s=f(()=>{var o;return((o=e==null?void 0:e.pageBlocks)==null?void 0:o.filter(n=>n.__typename==="ComponentSharedHighlight"))||[]}),l=S([]),g=f(()=>{var n;const o=new Set;return(n=s.value)==null||n.forEach(u=>{var L;(L=u.categories)==null||L.forEach(m=>{m!=null&&m.name&&o.add(m.name)})}),Array.from(o)}),b=f(()=>s.value?l.value.length===0?s.value:s.value.filter(o=>{var n;return(n=o.categories)==null?void 0:n.some(u=>l.value.includes(u.name))}):[]);return(o,n)=>(c(),h("div",{class:i(o.$style.highlights)},[r("h1",{class:i(o.$style.title)},"Highlights",2),F(le,{availableCategories:g.value,selectedCategories:l.value,"onUpdate:selectedCategories":n[0]||(n[0]=u=>l.value=u)},null,8,["availableCategories","selectedCategories"]),r("div",{class:i(o.$style.grid)},[(c(!0),h($,null,y(b.value,u=>(c(),R(X,{key:u.id,highlight:u},null,8,["highlight"]))),128))],2)],2))}}),ne="_highlights_17ubz_1",re="_title_17ubz_12",ce="_grid_17ubz_18",ge={highlights:ne,title:re,grid:ce},ue={$style:ge},me=v(oe,[["__cssModules",ue]]);export{me as default};
