import{u as E,a as w,m as x}from"./DHsEFPjZ.js";import{X as o,h as B,af as N,ag as _,ah as I,i as O,c as j,r as L,o as P,ak as v,ai as C}from"./B-GZQTAR.js";const M=["src"],H={__name:"NuxtImg",props:{custom:{type:Boolean,required:!1},placeholder:{type:[Boolean,String,Number,Array],required:!1},placeholderClass:{type:String,required:!1},src:{type:String,required:!1},format:{type:String,required:!1},quality:{type:[String,Number],required:!1},background:{type:String,required:!1},fit:{type:String,required:!1},modifiers:{type:Object,required:!1},preset:{type:String,required:!1},provider:{type:null,required:!1},sizes:{type:[String,Object],required:!1},densities:{type:String,required:!1},preload:{type:[Boolean,Object],required:!1},width:{type:[String,Number],required:!1},height:{type:[String,Number],required:!1},crossorigin:{type:[String,Boolean],required:!1},nonce:{type:String,required:!1}},emits:["load","error"],setup(u,{expose:y,emit:h}){const r=u,a=h,n=E(),{providerOptions:d,normalizedAttrs:q,imageModifiers:c}=w(r),l=o(()=>n.getSizes(r.src,{...d.value,sizes:r.sizes,densities:r.densities,modifiers:c.value})),i=B(!1),S=N(),m=o(()=>({...q.value,"data-nuxt-img":"",...!r.placeholder||i.value?{sizes:l.value.sizes,srcset:l.value.srcset}:{},...S})),p=o(()=>{if(i.value)return!1;const e=r.placeholder===""?[10,10]:r.placeholder;if(!e)return!1;if(typeof e=="string")return e;const[s=10,b=s,A=50,k=3]=Array.isArray(e)?e:typeof e=="number"?[e]:[];return n(r.src,{...c.value,width:s,height:b,quality:A,blur:k},d.value)}),f=o(()=>r.sizes?l.value.src:n(r.src,c.value,d.value)),g=o(()=>p.value||f.value),z=_().isHydrating,t=I("imgEl");return y({imgEl:t}),O(()=>{if(p.value||r.custom){const e=new Image;f.value&&(e.src=f.value),r.sizes&&(e.sizes=l.value.sizes||"",e.srcset=l.value.srcset),e.decode?e.decode().then(()=>{i.value=!0,a("load",new Event("load"))}).catch(s=>{a("error",s)}):(e.onload=s=>{i.value=!0,a("load",s)},e.onerror=s=>{a("error",s)}),x("nuxt-image");return}t.value&&(t.value.complete&&z&&(t.value.getAttribute("data-error")?a("error",new Event("error")):a("load",new Event("load"))),t.value.onload=e=>{a("load",e)},t.value.onerror=e=>{a("error",e)})}),(e,s)=>u.custom?L(e.$slots,"default",C(v({key:1},{imgAttrs:m.value,isLoaded:i.value,src:g.value}))):(P(),j("img",v({key:0,ref_key:"imgEl",ref:t,class:p.value?u.placeholderClass:void 0},m.value,{src:g.value}),null,16,M))}};export{H as _};
