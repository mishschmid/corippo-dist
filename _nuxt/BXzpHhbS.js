import{f as B,X as C,Z as E,o as n,e as D,n as l,w as O,a as d,b as N,t as f,c as h,F as w,r as b,_ as I,i as U,l as k,g as V,m as L,a0 as q,Y as P,O as p}from"./CXPIKJ9x.js";import{e as A}from"./CcxKKQEa.js";import{u as j,I as R}from"./2JDCUZ-t.js";import{u as W}from"./CJev5EEz.js";import{u as X}from"./ClEF_QlN.js";import{a as Y}from"./E3HsgXB3.js";const Z=B({__name:"HighlightCard",props:{highlight:{}},setup($){const{getImageUrl:c}=j(),g=$,y=C(()=>{var s;return c((s=g.highlight.headerImage)==null?void 0:s.url)||"/images/placeholder.jpg"});return(s,m)=>{const t=R,r=D;return n(),E(r,{to:`/highlights/${s.highlight.slug}`,class:l(s.$style.card)},{default:O(()=>{var i;return[d("div",{class:l(s.$style.image)},[N(t,{src:y.value,alt:((i=s.highlight.headerImage)==null?void 0:i.alternativeText)||s.highlight.title,lazy:!1,sizes:"(min-width: 1024px) 400px, (min-width: 768px) 350px, 100vw"},null,8,["src","alt"])],2),d("div",{class:l(s.$style.content)},[d("h3",{class:l(s.$style.title)},f(s.highlight.title),3),d("p",{class:l(s.$style.description)},f(s.highlight.description),3),d("div",{class:l(s.$style.categories)},[(n(!0),h(w,null,b(s.highlight.categories,v=>(n(),h("span",{key:v.slug,class:l(s.$style.category)},f(v.name),3))),128))],2)],2)]}),_:1},8,["to","class"])}}}),G="_card_33t9r_1",J="_image_33t9r_11",K="_content_33t9r_22",Q="_title_33t9r_26",x="_description_33t9r_32",ee="_categories_33t9r_38",te="_category_33t9r_44",se={card:G,image:J,content:K,title:Q,description:x,categories:ee,category:te},ae={$style:se},le=I(Z,[["__cssModules",ae]]),ie=["onClick"],oe=B({__name:"CategoryFilter",props:{availableCategories:{},selectedCategories:{}},emits:["update:selectedCategories"],setup($,{emit:c}){const g=$,y=c,s=t=>{const r=g.selectedCategories.includes(t)?g.selectedCategories.filter(i=>i!==t):[...g.selectedCategories,t];y("update:selectedCategories",r)},m=()=>{y("update:selectedCategories",[])};return(t,r)=>(n(),h("div",{class:l(t.$style.filter)},[d("div",{class:l(t.$style.categories)},[(n(!0),h(w,null,b(t.availableCategories,i=>(n(),h("button",{key:i,class:l([t.$style.category,{[t.$style.active]:t.selectedCategories.includes(i)}]),onClick:v=>s(i)},f(i),11,ie))),128)),t.selectedCategories.length>0?(n(),h("button",{key:0,class:l(t.$style.clearButton),onClick:m,"aria-label":"Clear filters"}," Ã— ",2)):U("",!0)],2)],2))}}),ne="_filter_1n384_1",re="_categories_1n384_5",ce="_category_1n384_11",ge="_active_1n384_20",ue="_clearButton_1n384_26",de={filter:ne,categories:re,category:ce,active:ge,clearButton:ue},he={$style:de},me=I(oe,[["__cssModules",he]]),_e=B({__name:"index",async setup($){var H,S,F,T;let c,g;const{getPageBySlug:y,getHighlightBlocks:s}=W(),m=k([]),t=k([]);k(null);const{data:r}=([c,g]=V(async()=>Y("highlights",async()=>await y("highlights"))),c=await c,g(),c);X({title:(S=(H=r.value)==null?void 0:H.seo)==null?void 0:S.metaTitle,meta:[{name:"description",content:(T=(F=r.value)==null?void 0:F.seo)==null?void 0:T.metaDescription}]});const i=C(()=>r.value?s(r.value):[]),v=C(()=>{var e;const a=new Set;return(e=i.value)==null||e.forEach(o=>{var u;o&&((u=o.categories)==null||u.forEach(_=>{_!=null&&_.name&&a.add(_.name)}))}),Array.from(a)}),M=C(()=>i.value?m.value.length===0?i.value.filter(Boolean):i.value.filter(Boolean).filter(a=>{var e;return(e=a.categories)==null?void 0:e.some(o=>m.value.includes(o.name))}):[]),z=()=>{if(t.value.length===0)return;const a=t.value.map(e=>e==null?void 0:e.$el).filter(Boolean);a.length!==0&&(p.killTweensOf(a),p.set(a,{opacity:1,y:30}),p.to(a,{opacity:1,y:0,duration:1.5,stagger:.04,ease:A.on3}))};return L(()=>{q(()=>{z()})}),P(M,()=>{const a=t.value.map(e=>e==null?void 0:e.$el).filter(Boolean);p.set(a,{opacity:0}),t.value=[],q(()=>{const e=t.value.map(u=>u==null?void 0:u.$el).filter(Boolean);if(e.length===0)return;p.killTweensOf(e),p.set(e,{opacity:0,y:30});const o=p.timeline();o.to(e,{opacity:1,duration:.2,ease:"power2.out"}),o.to(e,{y:0,duration:1,stagger:.04,ease:A.on3},"-=0.1")})}),(a,e)=>(n(),h("div",{class:l([a.$style.highlights,a.$style.page])},[d("h1",{class:l(a.$style.title)},"Highlights",2),N(me,{availableCategories:v.value,selectedCategories:m.value,"onUpdate:selectedCategories":e[0]||(e[0]=o=>m.value=o)},null,8,["availableCategories","selectedCategories"]),d("div",{class:l(a.$style.grid)},[(n(!0),h(w,null,b(M.value,(o,u)=>(n(),E(le,{key:o.slug,highlight:o,ref_for:!0,ref:_=>{_&&(t.value[u]=_)},class:l([a.$style.card,a.$style.cardAnimated])},null,8,["highlight","class"]))),128))],2)],2))}}),pe="_highlights_qnh7r_1",ye="_title_qnh7r_12",ve="_grid_qnh7r_18",$e="_card_qnh7r_29",Ce={highlights:pe,title:ye,grid:ve,card:$e},fe={$style:Ce},He=I(_e,[["__cssModules",fe]]);export{He as default};
