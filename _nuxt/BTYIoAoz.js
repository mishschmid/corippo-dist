import{g as b,q as h,c,o as n,j as L,a as g,n as a,_ as U,A as z,x as M,e as N,w as H,b as R,t as C,F as k,r as w,h as S,k as A,u as F}from"./DSjJXcjn.js";import{u as P}from"./Dsj3HNtE.js";import{u as E}from"./DgAogSrw.js";import"./BGvkhqb-.js";var T={};const V=["srcset"],j=["srcset"],D=["src","alt","width","height","loading"],W=b({__name:"Image",props:{src:{},alt:{},width:{default:void 0},height:{default:void 0},className:{default:""},lazy:{type:Boolean,default:!0}},setup(m){const t=m,i=(s,p)=>{if(!s)return"";if(s.startsWith("http"))return s;if(s.startsWith("/uploads/")){const f=T.NUXT_PUBLIC_STRAPI_URL||"/corippo-dist";if(p){const $=s.split("/"),v=$.pop();return`${f}${$.join("/")}/${p}_${v}`}return`${f}${s}`}return s},r=h(()=>i(t.src)),l=h(()=>i(t.src,"large")),e=h(()=>i(t.src,"medium")),o=h(()=>i(t.src,"small"));return(s,p)=>(n(),c("picture",null,[l.value?(n(),c("source",{key:0,srcset:l.value,media:"(min-width: 1024px)"},null,8,V)):L("",!0),e.value?(n(),c("source",{key:1,srcset:e.value,media:"(min-width: 768px)"},null,8,j)):L("",!0),g("img",{src:o.value||r.value,alt:s.alt,class:a([s.$style.image,s.className]),width:s.width,height:s.height,loading:s.lazy?"lazy":"eager"},null,10,D)]))}}),q="_image_12b0u_1",X={image:q},G={$style:X},J=U(W,[["__cssModules",G]]),K=()=>{var r;const t=((r=z().app)==null?void 0:r.baseURL)||"/";return{getImageUrl:l=>{if(!l)return"";const e=l.includes("/uploads")?l.split("/uploads/")[1]:l.replace(/^\/+/,"");return`${t}uploads/${e}`}}},O=b({__name:"HighlightCard",props:{highlight:{}},setup(m){return K(),(t,i)=>{const r=J,l=N;return n(),M(l,{to:`/highlights/${t.highlight.slug}`,class:a(t.$style.card)},{default:H(()=>{var e;return[g("div",{class:a(t.$style.image)},[R(r,{src:(e=t.highlight.headerImage)==null?void 0:e.url,alt:t.highlight.title,lazy:!1},null,8,["src","alt"])],2),g("div",{class:a(t.$style.content)},[g("h3",{class:a(t.$style.title)},C(t.highlight.title),3),g("p",{class:a(t.$style.description)},C(t.highlight.description),3),g("div",{class:a(t.$style.tags)},[(n(!0),c(k,null,w(t.highlight.categories,o=>(n(),c("span",{key:o.slug,class:a(t.$style.category)},C(o.name),3))),128))],2)],2)]}),_:1},8,["to","class"])}}}),Q="_card_1pb4t_1",Y="_image_1pb4t_15",Z="_content_1pb4t_26",x="_title_1pb4t_30",ee="_description_1pb4t_36",te="_categories_1pb4t_42",se="_category_1pb4t_48",ae={card:Q,image:Y,content:Z,title:x,description:ee,categories:te,category:se},ie={$style:ae},le=U(O,[["__cssModules",ie]]),oe=["onClick"],ne=b({__name:"CategoryFilter",props:{availableCategories:{},selectedCategories:{}},emits:["update:selectedCategories"],setup(m,{emit:t}){const i=m,r=t,l=e=>{const o=i.selectedCategories.includes(e)?i.selectedCategories.filter(s=>s!==e):[...i.selectedCategories,e];r("update:selectedCategories",o)};return(e,o)=>(n(),c("div",{class:a(e.$style.filter)},[g("div",{class:a(e.$style.categories)},[(n(!0),c(k,null,w(e.availableCategories,s=>(n(),c("button",{key:s,class:a([e.$style.category,{[e.$style.active]:e.selectedCategories.includes(s)}]),onClick:p=>l(s)},C(s),11,oe))),128))],2)],2))}}),re="_filter_1exu3_1",ce="_categories_1exu3_5",ge="_category_1exu3_11",ue="_active_1exu3_23",de={filter:re,categories:ce,category:ge,active:ue},_e={$style:de},he=U(ne,[["__cssModules",_e]]),me=b({__name:"index",async setup(m){var $,v,I;let t,i;F();const{getPageBySlug:r,getHighlightBlocks:l}=P(),e=([t,i]=S(()=>r("highlights")),t=await t,i(),t);console.log("page:",e),E({title:($=e==null?void 0:e.seo)==null?void 0:$.metaTitle,meta:[{name:"description",content:(v=e==null?void 0:e.seo)==null?void 0:v.metaDescription}],link:(I=e==null?void 0:e.seo)!=null&&I.canonicalURL?[{rel:"canonical",href:e.seo.canonicalURL}]:[]});const o=h(()=>e?l(e):[]),s=A([]),p=h(()=>{var d;const u=new Set;return(d=o.value)==null||d.forEach(_=>{var B;(B=_.categories)==null||B.forEach(y=>{y!=null&&y.name&&u.add(y.name)})}),Array.from(u)}),f=h(()=>o.value?s.value.length===0?o.value:o.value.filter(u=>{var d;return(d=u.categories)==null?void 0:d.some(_=>s.value.includes(_.name))}):[]);return(u,d)=>(n(),c("div",{class:a(u.$style.highlights)},[g("h1",{class:a(u.$style.title)},"Highlights",2),R(he,{availableCategories:p.value,selectedCategories:s.value,"onUpdate:selectedCategories":d[0]||(d[0]=_=>s.value=_)},null,8,["availableCategories","selectedCategories"]),g("div",{class:a(u.$style.grid)},[(n(!0),c(k,null,w(f.value,_=>(n(),M(le,{key:_.id,highlight:_},null,8,["highlight"]))),128))],2)],2))}}),pe="_highlights_17ubz_1",$e="_title_17ubz_12",fe="_grid_17ubz_18",ve={highlights:pe,title:$e,grid:fe},ye={$style:ve},we=U(me,[["__cssModules",ye]]);export{we as default};
