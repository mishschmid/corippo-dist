import{_ as D}from"./BmZMzHKS.js";import{D as F,g as v,x as M,o,e as L,n as a,w as S,a as h,b as z,t as m,c as d,F as y,r as $,_ as C,k as A,h as E,q as f}from"./BEV4Jm74.js";import{u as N}from"./BS5P9S8G.js";import{u as R}from"./Clj-yNNo.js";import{a as P}from"./D5IPZqFS.js";const T=()=>{var r;const e=((r=F().app)==null?void 0:r.baseURL)||"/corippo-dist";return{getImageUrl:i=>{if(!i)return"";if(i.startsWith("http"))return i;if(i.includes("/uploads/")){const t=i.split("/uploads/")[1];return`${e}/uploads/${t}`}return i}}},V=v({__name:"HighlightCard",props:{highlight:{}},setup(_){return T(),(e,n)=>{const r=D,i=L;return o(),M(i,{to:`/highlights/${e.highlight.slug}`,class:a(e.$style.card)},{default:S(()=>{var t,l;return[h("div",{class:a(e.$style.image)},[z(r,{src:((t=e.highlight.headerImage)==null?void 0:t.url)||"/images/placeholder.jpg",alt:((l=e.highlight.headerImage)==null?void 0:l.alternativeText)||e.highlight.title,lazy:!1},null,8,["src","alt"])],2),h("div",{class:a(e.$style.content)},[h("h3",{class:a(e.$style.title)},m(e.highlight.title),3),h("p",{class:a(e.$style.description)},m(e.highlight.description),3),h("div",{class:a(e.$style.categories)},[(o(!0),d(y,null,$(e.highlight.categories,s=>(o(),d("span",{key:s.slug,class:a(e.$style.category)},m(s.name),3))),128))],2)],2)]}),_:1},8,["to","class"])}}}),j="_card_1pb4t_1",q="_image_1pb4t_15",W="_content_1pb4t_26",G="_title_1pb4t_30",J="_description_1pb4t_36",K="_categories_1pb4t_42",O="_category_1pb4t_48",Q={card:j,image:q,content:W,title:G,description:J,categories:K,category:O},X={$style:Q},Y=C(V,[["__cssModules",X]]),Z=["onClick"],x=v({__name:"CategoryFilter",props:{availableCategories:{},selectedCategories:{}},emits:["update:selectedCategories"],setup(_,{emit:e}){const n=_,r=e,i=t=>{const l=n.selectedCategories.includes(t)?n.selectedCategories.filter(s=>s!==t):[...n.selectedCategories,t];r("update:selectedCategories",l)};return(t,l)=>(o(),d("div",{class:a(t.$style.filter)},[h("div",{class:a(t.$style.categories)},[(o(!0),d(y,null,$(t.availableCategories,s=>(o(),d("button",{key:s,class:a([t.$style.category,{[t.$style.active]:t.selectedCategories.includes(s)}]),onClick:b=>i(s)},m(s),11,Z))),128))],2)],2))}}),ee="_filter_1exu3_1",te="_categories_1exu3_5",se="_category_1exu3_11",ae="_active_1exu3_23",ie={filter:ee,categories:te,category:se,active:ae},le={$style:ie},oe=C(x,[["__cssModules",le]]),ne=v({__name:"index",async setup(_){var k,w,B,H;let e,n;const{getPageBySlug:r,getHighlightBlocks:i}=N(),t=A([]),{data:l}=([e,n]=E(async()=>P("highlights",async()=>await r("highlights"))),e=await e,n(),e);R({title:(w=(k=l.value)==null?void 0:k.seo)==null?void 0:w.metaTitle,meta:[{name:"description",content:(H=(B=l.value)==null?void 0:B.seo)==null?void 0:H.metaDescription}]});const s=f(()=>l.value?i(l.value):[]),b=f(()=>{var g;const c=new Set;return(g=s.value)==null||g.forEach(u=>{var I;(I=u.categories)==null||I.forEach(p=>{p!=null&&p.name&&c.add(p.name)})}),Array.from(c)}),U=f(()=>s.value?t.value.length===0?s.value:s.value.filter(c=>{var g;return(g=c.categories)==null?void 0:g.some(u=>t.value.includes(u.name))}):[]);return(c,g)=>(o(),d("div",{class:a(c.$style.highlights)},[h("h1",{class:a(c.$style.title)},"Highlights",2),z(oe,{availableCategories:b.value,selectedCategories:t.value,"onUpdate:selectedCategories":g[0]||(g[0]=u=>t.value=u)},null,8,["availableCategories","selectedCategories"]),h("div",{class:a(c.$style.grid)},[(o(!0),d(y,null,$(U.value,u=>(o(),M(Y,{key:u.slug,highlight:u},null,8,["highlight"]))),128))],2)],2))}}),re="_highlights_17ubz_1",ce="_title_17ubz_12",ge="_grid_17ubz_18",ue={highlights:re,title:ce,grid:ge},he={$style:ue},ve=C(ne,[["__cssModules",he]]);export{ve as default};
