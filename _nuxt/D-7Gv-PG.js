import{u as j,a as F,m as $}from"./DHsEFPjZ.js";import{af as O,X as g,ag as B,ah as E,i as P,c as i,o as n,F as h,j as x,ai as I,aj as M,ak as W,f as C,g as _,b as T,Z as L,t as R,_ as V}from"./B-GZQTAR.js";const D=["type","sizes","srcset"],H=["src","sizes","srcset"],U=Object.assign({inheritAttrs:!1},{__name:"NuxtPicture",props:{legacyFormat:{type:String,required:!1},imgAttrs:{type:Object,required:!1},src:{type:String,required:!1},format:{type:String,required:!1},quality:{type:[String,Number],required:!1},background:{type:String,required:!1},fit:{type:String,required:!1},modifiers:{type:Object,required:!1},preset:{type:String,required:!1},provider:{type:null,required:!1},sizes:{type:[String,Object],required:!1},densities:{type:String,required:!1},preload:{type:[Boolean,Object],required:!1},width:{type:[String,Number],required:!1},height:{type:[String,Number],required:!1},crossorigin:{type:[String,Boolean],required:!1},nonce:{type:String,required:!1}},emits:["load","error"],setup(f,{emit:t}){const r=f,o=t,m=O(),q=new Set(["alt","referrerpolicy","usemap","longdesc","ismap","loading","crossorigin","decoding","nonce"]),y=g(()=>{const e={img:{...w.value,...r.imgAttrs,"data-nuxt-pic":""},picture:{}};for(const s in m)q.has(s)?s in e.img||(e.img[s]=m[s]):e.picture[s]=m[s];return e}),d=g(()=>{var e,s;return(s=(e=r.src)==null?void 0:e.match(/^[^?#]+\.(\w+)(?:$|[?#])/))==null?void 0:s[1]}),l=g(()=>r.legacyFormat?r.legacyFormat:!d.value||!["png","webp","gif","svg"].includes(d.value)?"jpeg":"png"),p=j(),{providerOptions:z,imageModifiers:S,normalizedAttrs:w}=F(r),v=g(()=>{var s,a;const e=((s=r.format)==null?void 0:s.split(","))||(d.value==="svg"?["svg"]:(a=p.options.format)!=null&&a.length?[...p.options.format]:["webp"]);return e[0]==="svg"?[{src:r.src}]:(e.includes(l.value)&&e.splice(e.indexOf(l.value),1),e.push(l.value),e.map(c=>{const{srcset:N,sizes:A,src:k}=p.getSizes(r.src,{...z.value,sizes:r.sizes||p.options.screens,densities:r.densities,modifiers:{...S.value,format:c}});return{src:k,type:`image/${c}`,sizes:A,srcset:N}}))}),b=B().isHydrating,u=E("imgEl");return P(()=>{const e=Array.isArray(u.value)?u.value[0]:u.value;e&&(e.complete&&b&&(e.getAttribute("data-error")?o("error",new Event("error")):o("load",new Event("load"))),e.onload=s=>{o("load",s)},e.onerror=s=>{o("error",s)},$("nuxt-picture"))}),(e,s)=>(n(),i("picture",I(M(y.value.picture)),[(n(!0),i(h,null,x(v.value,(a,c)=>(n(),i(h,null,[c+1<v.value.length?(n(),i("source",{key:a.src,type:a.type,sizes:a.sizes,srcset:a.srcset},null,8,D)):(n(),i("img",W({ref_for:!0,ref_key:"imgEl",ref:u,key:"last"+a.src},y.value.img,{src:a.src,sizes:a.sizes,srcset:a.srcset}),null,16,H))],64))),256))],16))}}),X=C({__name:"Image",props:{src:{},alt:{},caption:{},width:{default:void 0},height:{default:void 0},className:{default:""},lazy:{type:Boolean,default:!0},sizes:{default:"xs:100vw sm:100vw md:100vw lg:1024px xl:1200px"},quality:{default:80},placeholder:{type:Boolean,default:!1}},setup(f){return(t,r)=>{const o=U;return n(),i("div",{class:_(t.$style.imageWrapper)},[T(o,{src:t.src,alt:t.alt,width:t.width,height:t.height,"img-attrs":{class:[t.$style.image,t.className],loading:t.lazy?"lazy":"eager"},sizes:t.sizes,quality:t.quality,format:"webp",placeholder:t.placeholder?[50,25,75,5]:void 0},null,8,["src","alt","width","height","img-attrs","sizes","quality","placeholder"]),t.caption?(n(),i("p",{key:0,class:_(t.$style.caption)},R(t.caption),3)):L("",!0)],2)}}}),Z="_imageWrapper_1x1im_1",G="_image_1x1im_1",J="_caption_1x1im_10",K={imageWrapper:Z,image:G,caption:J},Q={$style:K},te=V(X,[["__cssModules",Q]]);export{te as I};
